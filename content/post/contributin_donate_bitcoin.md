+++
title = "Contributing to Donate Bitcoin"
subtitle = ""
date = "2017-11-05T21:34:23+02:00"
bigimg = ""
keywords = "Javascript, HTML, Bitcoin, open source, GitHub, Hacktoberfest"
description = "Contributing to Donate Bitcoin project"
+++

During the [Hacktoberfest Barcelona](https://hacktoberfestbarcelona.com) event I started working on contributing to the [Donate Bitcoin](https://github.com/nrobinson2000/donate-bitcoin) project.
<!--more-->

[Donate Bitcoin](https://github.com/nrobinson2000/donate-bitcoin) is a simple yet clever project that creates a basic page to accept bitcoin donations through an URL and QR code linked to the user's specified Bitcoin wallet.

I started to work on improving this project while implementing it for my own blog [donations page](http://esaezgil.com/donate/). My blog, a static website generated by [Hugo](gohugohq.com), is lighting-fast and I quickly noticed that the Javascript console was complaining about some blocking calls in the new donations page:

<center>
<figure>
<img src="/img/donate_bitcoin_project/XMLHttoRequest_synchronous.png" height="80%" width="80%"/>
</figure>
</center>


As shown above, the problem originated from the blocking [synchronous XMLHttpRequest calls](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Synchronous_and_Asynchronous_Requests) on the main thread of the newly added Javascript and HTML code. In order to fix this, I had to make use of asynchronous calls and along the way I decided to refactor the code to make it more legible and understandable as well as:

- Avoiding Synchronous XMLHttpRequest on the main thread (as mentioned befores)
- Making self-contained functions
- Renaming the offending div to avoid clashes between element id and function name
- Failing gracefully when user input can not be handled
- Adding a default amount that is displayed on first load
- Start improving code style
- A minor User Experience tweak to reassure the user of the amount to be donated in fiat currency

The most time consuming piece of work was related to figuring out that the original QR code generating library was not working properly on my browser due to the clashes between the library's function and a div element's identifier.<br>
For my own use case in my blog, I just made use of another library for generating the QR codes. However, I assumed that this was not acceptable for the original project and dig on the problem until I solved it.

Taking into account that I had in mind just some of the use cases of the original project and there were almost no tests, I wanted to be cautious about not breaking any of the functionalities nor changing its original behavior.

Unfortunately this was not the case, and the maintainer of the project realized about it and released some  fixes [[1]](https://github.com/nrobinson2000/donate-bitcoin/commit/e6483a2e61d940bb86dea74bf4f39cb62fcfdf6b) [[2]](https://github.com/nrobinson2000/donate-bitcoin/commit/f4c5d2bb04001c4c69b7d689f5d69730be9a5198) after merging my pull request.

The final result is shown below for the mobile layout:

<center>
<figure>
<img src="/img/donate_bitcoin_project/donate_bitcoin_mobile_view.png" height="50%" width="50%"/>
</figure>
</center>

Although there is still room for improvement in the project, like adding tests and improving the code style I am happy that I contributed to improving the original project.

Finally, take a look at my [merge request](https://github.com/nrobinson2000/donate-bitcoin/pull/1)
